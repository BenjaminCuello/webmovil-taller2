# API de Clima y Feriados — FastAPI + MongoDB

Esta API entrega información de clima y feriados, se replica lo que se usó en el Taller 1, pero sin depender de servicios externos:
todo se sirve directamente desde una base de datos MongoDB con datos precargados.

Los seeds locales (`weather-seed.json` y `holidays-seed.json`) se utilizan para inicializar la BD la primera vez que corre el servicio.

---

## Cómo ejecutarla con Docker Compose

Desde la raíz del repositorio, basta con ejecutar:

```bash
docker compose up --build
```

Una vez levantado, la API queda disponible en:

http://localhost:8000

FastAPI también expone automáticamente la documentación interactiva en:

http://localhost:8000/docs

La conexión a MongoDB se toma desde la variable MONGODB_URI.
Si no está definida, se usa un valor por defecto que está configurado dentro del proyecto.

---

## Endpoints

### GET /weather?city=<nombre>

Retorna el clima actual para la ciudad solicitada.

Ejemplo de respuesta:

```json
{
  "coordenadas": {
    "name": "Valparaíso",
    "country_code": "CL",
    "latitude": -33.036,
    "longitude": -71.62963
  },
  "clima": {
    "current": {
      "temperature_2m": 14.3,
      "wind_speed_10m": 8.4
    }
  }
}
```

### GET /holidays/<countrycode>/<year>

Entrega la lista de feriados para un país y año específicos.

Ejemplo de respuesta:

```json
[
  { "date": "2025-01-01", "localName": "Año Nuevo", "name": "Año Nuevo" },
  {
    "date": "2025-09-19",
    "localName": "Día de las Glorias del Ejército",
    "name": "Día de las Glorias del Ejército"
  }
]
```

---

## Datos y base utilizada

- Base de datos: MongoDB

- Colecciones: weather_data y holidays_data

- Seeds: weather-seed.json y holidays-seed.json

Al iniciarse FastAPI, se revisa si las colecciones están vacías.
Si es así, se cargan los datos desde los seeds locales para garantizar que siempre exista información mínima.
