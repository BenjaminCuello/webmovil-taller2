# API Pokémon (NestJS)

## 1) Nombre y propósito
Expone un catálogo de Pokémon para el frontend del Taller 2. Replica lo mínimo usado de PokeAPI en el Taller 1: listar y obtener detalle (id, name, height, weight, types, sprites, stats). Usa sprites locales (`/img/pokemon/...`).

## 2) Tecnología usada
- NestJS (Node.js sobre Express)
- PostgreSQL
- Docker Compose (si corresponde)

## 3) Cómo ejecutarla

### Opción A — Docker Compose (recomendada)
Desde la raíz del repositorio:
```cmd
docker compose up --build
```
Disponible en `http://localhost:3000`. El contenedor corre `npm run seed` antes de iniciar.

### Opción B — Local (sin Docker)
```cmd
cd backend\nest\api-pokemon
npm install
set DB_HOST=localhost
set DB_PORT=5432
set DB_USER=postgres
set DB_PASSWORD=mysecretpassword
set DB_NAME=countries_db
npm run seed
npm run start:dev
```
Sirve en `http://localhost:3000`.

## 4) Endpoints disponibles
- `GET /pokemon?limit=<n>&offset=<n>` → lista paginada (`limit` máx. 50)
- `GET /pokemon/:idOrName` → detalle por id numérico o nombre (case-insensitive)

## 5) Ejemplos de respuesta
`GET /pokemon?limit=2`:
```json
{
  "count": 30,
  "results": [
    { "name": "bulbasaur", "url": "/pokemon/1" },
    { "name": "ivysaur", "url": "/pokemon/2" }
  ]
}
```

`GET /pokemon/25`:
```json
{
  "id": 25,
  "name": "pikachu",
  "height": 4,
  "weight": 60,
  "types": [
    { "slot": 1, "type": { "name": "electric" } }
  ],
  "sprites": {
    "front_default": "/img/pokemon/25.png",
    "back_default": null,
    "other": { "official-artwork": { "front_default": "/img/pokemon/25_artwork.png" } }
  },
  "stats": [
    { "base_stat": 35, "stat": { "name": "hp" } },
    { "base_stat": 55, "stat": { "name": "attack" } }
  ]
}
```

## 6) Notas sobre la base de datos
- Origen de datos: `seed-data.json` (se carga con `npm run seed`).
- Inicialización: el Dockerfile ejecuta `npm run seed` antes de iniciar la API; en local, ejecuta el mismo comando manualmente.
- Esquema: tabla `pokemon` con columnas `id`, `name`, `sprite_default`, `sprite_artwork`, `types` (jsonb), `height_m` (real), `weight_kg` (real), `stats` (jsonb). TypeORM `synchronize=true` crea/ajusta la tabla en desarrollo.

